@startuml
title Autosleep Service Instance FSM
scale 1024 width
[*] --> StandardEnrollment
StandardEnrollment --> ForcedEnrollment: update(enrollment=forced,\nsecret=adminSecret)
StandardEnrollment: unbind(): accept and add application to enrollment black list
StandardEnrollment: delete(): accept
ForcedEnrollment : secret
ForcedEnrollment --> ForcedEnrollment: update(enrollment=regular,\nsecret!=adminSecret) : \n / refuse
ForcedEnrollment --> StandardEnrollment: update(enrollment=regular,\nsecret=adminSecret)
ForcedEnrollment : unbind(): accept but still candidate to automatic enrollment
ForcedEnrollment : delete(): refuse
