language: java
jdk:
  - oraclejdk8
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
services:
  - mysql
  - postgresql
before_script:
  - mysql -e "create database IF NOT EXISTS autosleep;" -uroot
  - psql -c 'create database autosleep;' -U postgres
script:
  - ./gradlew check -Dintegration-test=true
branches:
  only:
    - master
    - develop
    - /^feature-.*$/
    - /^fix-.*$/
after_success:
  - ./gradlew jacocoRootReport coveralls
notifications:
  slack: #cloudfoundry slack 
      secure: "IlBWDKuvxq2wtZR/YW9MGajoM09HUm3PS+ul2vTEVTHI3YvNtkNnyJ5SzHci3hrVU9tLX6k+5yjB6ptAwHDffzaHgHuCmKZ7C9DY15x40fTe+btSJbPvZkXEMHd1EnwVCiJRAFJsldF6Y/VXG8WoZuTy55YR3TyiXDzjW/Atp/q0BXCbLLnGCSgGLHfS/17Qu/xWX9Nr0Dr1q5WJEjxlyKiom/aE6NOuSR2pQRHbsygF5FYSQMOPodPnm3h0jpX7YUlsFR8Qip9n+gZcVAjHuoHisP/Y4hjJPEyUjAfucjf8BiijgQjlI8Uz53Ftbh3RFTzInep/jucg+yDPtaaT9ex7Jc4QU+plCxuBflXJyoSiLOxpkArAzR45MPRRwlZX+NhyBdujzhZpy/kHpk5EHynW+MXEp1izHaVFKBh5AN0tT8Mvz1dfaZV6hcrHzAPkphv9oeCrH+CrLifS3v794Ke3kJK2bMMi+O9mf0eyVeP5/KHw3Z5TLL/4zL6Of8dmA28kWDa8NL0U8RwA195atLDUkMHyy/wbaRVUI8eJ7yD8dQVrKqilyasFajnrcSY4mfMVVzkhVB8T+OBp5RMXMCh6Soj1oJbKi8pHarq5kvhsZyutvmO2zkDzXiGrfq7bZ2RbilVMCSaIdDhSl6/7rlTQnSXAkmVKo5HmueGkDfI="
